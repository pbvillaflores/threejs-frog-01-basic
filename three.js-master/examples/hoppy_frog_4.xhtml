<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Web3D tutorial 1</title> 
    <link rel="stylesheet" type="text/css" href="../x3dom/x3dom.css"/>
    <script type="text/javascript" src="../x3dom/x3dom.js">
    </script>
    <style type="text/css">
      body{
        background-color: gray;
      }
	  
    </style>
  </head>
  <body>
    <h1>X3DOM Tute4.2</h1>
    <X3D xmlns="http://www.web3d.org/specifications/x3d-namespace" width="400px" height="400px">
    <Scene>
      <Transform DEF="JUMP" translation="0 0 0">
    
        <Shape  DEF="TOES" >      
          <TriangleSet solid='false'>
          <Coordinate point='-.5 0 0, -.3 0 .1, -.3 0 -.1  '/>
          </TriangleSet>
          <Appearance>
              <Material diffuseColor="1.0 0.0 0.0"/>
          </Appearance>
        </Shape>
      
        <Transform translation="0 0 1">
          <Shape USE="TOES"/>
        
          <Transform translation="-.5 0 0">
            <Transform DEF="FeetAngle" rotation="0 0 1 0">
            
              <Shape DEF="AXIS">
                <IndexedLineSet  
                  coordIndex=" 0 1 -1 0 2 -1 0 3 -1"
                  colorPerVertex="true"
                  colorIndex="0 0 -1 1 1 -1 2 2 -1">
                <Coordinate point="0 0 0, 1 0 0, 0 1 0, 0 0 1"/>
                <Color color="1 0 0, 0 1 0, 0 0 1"/>
                </IndexedLineSet>
              </Shape>
              
              <Shape  DEF="OCTA" >      
                <Appearance>
                  <Material diffuseColor='0.8 0.4 0.2'/>
                </Appearance>
                <IndexedFaceSet coordIndex='1 0 4 -1, 2 1 4 -1, 3 2 4 -1, 0 3 4 -1,    0 1 5 -1, 1 2 5 -1, 2 3 5 -1, 3 0 5 -1'>
                  <Coordinate point='0 0 0, -.5 0 .25, -1 0 0, -.5 0 -.25, -.5 .25 0, -.5 -.25 0   '/>
                </IndexedFaceSet>
              </Shape>
              
              <!-- LEFT FEET -->
              <Transform translation="0 0 -1">
                <Shape USE="OCTA"/>
                
                <Transform translation="-.75 .05 0">  
                  <Transform DEF="AnkleAngle" rotation="0 0 1 4.71">
                    <Transform translation="0 0 .05">
                      <Transform rotation="0 1 0 .355">
                        <Shape USE="OCTA"/>
                        <Transform rotation="0 1 0 -.355">
                        
                          <!-- Right Lower Leg -->
                          <Transform translation="0 0 .9 ">
                            <Transform rotation="0 1 0 -.355">
                          
                              <Shape USE="OCTA"/>              
                              <Transform rotation="0 1 0 .355">
                              
                                <Transform translation="-.6 -.1 -.02">  <!-- Offset of knee and upper leg -->
                                  <Transform DEF="KneeAngle" rotation="0 0 1 -1.57">
                                  
                                    <!-- Right Upper Leg -->
                                    <Shape USE="OCTA"/> 
                                    
                                    <Transform translation="0 0 -.86">  <!-- Offset of knee and upper leg -->
                                      <Shape USE="OCTA"/> 
                                      
                                      <Transform translation="-.4 0 .36"> 
                                        <Transform rotation="0 0 1 3.14">
                                          <Transform translation="1 0 0"> 

                                            <!-- Torso -->
                                            <Shape USE="AXIS"/>
                                            <Shape> 
                                              <Appearance>
                                              <ImageTexture url='"penta.png"
                                                  "http://goanna.cs.rmit.edu.au/~gl/teaching/web3d/ass1/penta.png"'
                                              />
                                              </Appearance>
                                              <IndexedFaceSet coordIndex='1 5 0 -1   2 5 1 -1   3 5 2 -1   4 5 3 -1   0 5 4 -1        0 6 1 -1   1 6 2 -1   2 6 3 -1   3 6 4 -1   4 6 0 -1'>
                                                <Coordinate point='0.81 0 -0.59, -0.31 0 -0.95, -1 0 0,  -0.31 0 0.95, 0.81 0 0.59 , 0 0.5 0  , 0 -0.5 0 '/>
                                                <TextureCoordinate point='0 0, .1 0, .1 .1, 0 .1     0 0, .1 0, .1 .1, 0 .1     0 0, .1 0, .1 .1, 0 .1       0 0, .1 0, .1 .1, 0 .1      0 0, .1 0, .1 .1, 0 .1       0 0, .1 0, .1 .1, 0 .1      0 0, .1 0, .1 .1, 0 .1      0 0, .1 0, .1 .1, 0 .1     0 0, .1 0, .1 .1, 0 .1    '/>
                                              </IndexedFaceSet>
                                            </Shape>
                                      
                                            <!-- Head -->
                                            <Transform translation="1.5 0 0"> 
                                              <Shape USE="AXIS"/>
                                              <Shape USE="OCTA"/> 
                                              <Transform DEF="Mouth" translation="0 -.1 0" scale=".5 .5 .5"> 
                                                <Transform rotation=" 0 0 1 -.2"> 
                                                  <Shape USE="OCTA"/> 
                                                </Transform>
                                              </Transform>  
                                              
                                              <Transform translation="-.3 .1 .1"> 
                                                <Shape>
                                                  <Sphere radius='0.05'/>
                                                  <Appearance>
                                                    <Material diffuseColor='0 0 0'/>
                                                  </Appearance>
                                                </Shape>
                                              </Transform>
                                              <Transform translation="-.3 .1 -.1"> 
                                                <Shape>
                                                  <Sphere radius='0.05'/>
                                                  <Appearance>
                                                    <Material diffuseColor='0 0 0'/>
                                                  </Appearance>
                                                </Shape>
                                              </Transform>
                                              <Transform translation="-1.3 -.1 .7" rotation="0 0 1 2.7"> 
                                                <Shape USE="AXIS"/>
                                                <Shape USE="OCTA"/>
                                                <Transform translation="-.7"> 
                                                  <Shape USE="OCTA"/>                                                
                                                  <Transform translation="-.7"> 
                                                    <Shape USE="AXIS"/>
                                                    <Transform translation="-.75 -.2 0" rotation="0 0 1 3.5"> 
                                                      <Shape USE="TOES"/> 
                                                    </Transform>
                                                  </Transform>
                                                </Transform>
                                                <Transform translation="0 0 -1.2"> 
                                                  <Shape USE="OCTA"/>                                                
                                                  <Transform translation="-.7"> 
                                                    <Shape USE="OCTA"/>                                                
                                                    <Transform translation="-.7"> 
                                                      <Transform translation="-.75 -.2 0" rotation="0 0 1 3.5"> 
                                                        <Shape USE="TOES"/> 
                                                      </Transform>
                                                    </Transform>
                                                  </Transform>
                                                </Transform>
                                              </Transform>
                                              
                                              
                                            </Transform>                  
                                          </Transform>                              
                                        </Transform>                              
                                      </Transform>                                  
                                    </Transform>                              
                                  </Transform>                          
                                </Transform>
                              </Transform>
                            </Transform>
                          </Transform>
                        </Transform>
                      </Transform>
                    </Transform>
                  </Transform>
                </Transform>
              </Transform> 
            </Transform>
          </Transform>
        
        </Transform>
      </Transform>
      
      <Shape>
        <IndexedLineSet  
          coordIndex=" 0 1 -1 0 2 -1 0 3 -1"
          colorPerVertex="true"
          colorIndex="0 0 -1 1 1 -1 2 2 -1">
        <Coordinate point="0 0 0, 10 0 0, 0 10 0, 0 0 10"/>
        <Color color="1 0 0, 0 1 0, 0 0 1"/>
        </IndexedLineSet>
      </Shape>
      
      <Shape>
        <IndexedFaceSet solid='false' coordIndex='0 1 2 3 4 -1'>
        <Coordinate point='3.35 0 3.35 3.35 0 -3.35 -3.35 0 -3.35 -3.35 0 3.35 3.35 0 3.35'/>
        </IndexedFaceSet> 
        <Appearance>
        <Material diffuseColor='0.27 0.51 0.71' transparency='.5'/>
        </Appearance>
      </Shape>

      <!-- Transparent Plane -->
      <Shape>
        <IndexedFaceSet solid='false' coordIndex='0 1 2 3 4 -1'>
        <Coordinate point='3.35 0 3.35 3.35 0 -3.35 -3.35 0 -3.35 -3.35 0 3.35 3.35 0 3.35'/>
        </IndexedFaceSet> 
        <Appearance>
        <Material diffuseColor='0.27 0.51 0.71' transparency='.5'/>
        </Appearance>
      </Shape>
      
      
      <Group>
      <!-- A rectangular pond -->
        <Transform>
          <Transform translation='0.0 -1.25 0.0'>
            <Shape>
              <Appearance>
                <Material diffuseColor='1.0 1.0 1.0' transparency='0.5'/>
              </Appearance> 
              <Box size='6.0 2.5 2.5'/>
            </Shape>
          </Transform> 
        </Transform>

        <Transform translation="-.3 0 0">
          <Shape>
          <!-- A lily -->
            <Cone bottomRadius='0.3' height='.1'/>
            <Appearance>
              <Material diffuseColor='1.0 1.0 .9'/>
            </Appearance>
          </Shape>
        </Transform> 
        
        <Transform translation="-.3 0 1">
          <Shape>
          <!-- A lily -->
            <Cone bottomRadius='0.3' height='.1'/>
            <Appearance>
              <Material diffuseColor='1.0 1.0 .9'/>
            </Appearance>
          </Shape>
        </Transform> 
        
        <Transform translation="2.8 0 0">
          <Shape>
          <!-- A lily -->
            <Cone bottomRadius='0.3' height='.1'/>
            <Appearance>
              <Material diffuseColor='1.0 1.0 .9'/>
            </Appearance>
          </Shape>
        </Transform> 
        
        <Transform translation="2.8 0 1">
          <Shape>
          <!-- A lily -->
            <Cone bottomRadius='0.3' height='.1'/>
            <Appearance>
              <Material diffuseColor='1.0 1.0 .9'/>
            </Appearance>
          </Shape>
        </Transform> 
      </Group>
      

      <Viewpoint description='Pyramid' orientation='0 1 0 .2' position='4 0 8'/> 
   		<timeSensor DEF='clock' cycleInterval='8' loop='true'></timeSensor>
      <orientationInterpolator DEF='spinfeet' key='0 0.5 1' keyValue='0 0 1 3.92, 0 0 1 4.71, 0 0 1 3.92'></orientationInterpolator>
      <ROUTE fromNode='clock' fromField='fraction_changed' toNode='spinfeet' toField='set_fraction'></ROUTE>
      <ROUTE fromNode='spinfeet' fromField='value_changed' toNode='FeetAngle' toField='set_rotation'></ROUTE>

      <orientationInterpolator DEF='spinankle' key='0 0.5 1' keyValue='0 0 1 1.57, 0 0 1 0, 0 0 1 1.57'></orientationInterpolator>
      <ROUTE fromNode='clock' fromField='fraction_changed' toNode='spinankle' toField='set_fraction'></ROUTE>
      <ROUTE fromNode='spinankle' fromField='value_changed' toNode='AnkleAngle' toField='set_rotation'></ROUTE>
      
      <orientationInterpolator DEF='spinknee' key='0 0.5 1' keyValue='0 0 1 3.92, 0 0 1 4.71, 0 0 1 3.92'></orientationInterpolator>
      <ROUTE fromNode='clock' fromField='fraction_changed' toNode='spinknee' toField='set_fraction'></ROUTE>      
      <ROUTE fromNode='spinknee' fromField='value_changed' toNode='KneeAngle' toField='set_rotation'></ROUTE>
      

      <PositionInterpolator DEF='HI' key='0 .5 .75 1' keyValue='0 0 0 0 0 0 0 1 0 0 0 0'/>       
      <ROUTE fromNode='clock' fromField='fraction_changed' toNode='HI' toField='set_fraction'/> 
      <ROUTE fromNode='HI' fromField='value_changed' toNode='JUMP' toField='set_translation'/>
      
      <PositionInterpolator DEF='JAW' key='0 .5 .75 1' keyValue='0 -.1 0 0 -.1 0 0 -.2 0 0 -.1 0'/>       
      <ROUTE fromNode='clock' fromField='fraction_changed' toNode='JAW' toField='set_fraction'/> 
      <ROUTE fromNode='JAW' fromField='value_changed' toNode='Mouth' toField='set_translation'/>
      
    </Scene>
    </X3D>
  </body>
</html>